<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin: 0; padding: 0; overflow: hidden; }
        body { height: 100vh; background: #000; }
        #status { position: fixed; top: 10px; left: 10px; color: #0f0; z-index: 999; font-family: Arial; }
    </style>
</head>
<body>
    <div id="status">üîÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è fingerprint...</div>
    <script>
        Telegram.WebApp.expand();
        
        // üé≤ –ù–û–í–´–ô ANTI-DETECT –ö–ê–ñ–î–´–ô –†–ê–ó! (–∏–∑ antidirect.js)
        const UAs = [
            'Mozilla/5.0 (iPhone; CPU iPhone OS 17_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.2 Mobile/15E148 Safari/604.1',
            'Mozilla/5.0 (Linux; Android 14; SM-S928B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Mobile Safari/537.36',
            'Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1'
        ];
        const randomUA = UAs[Math.floor(Math.random()*UAs.length)];
        const isIphone = randomUA.includes('iPhone');
        
        // ‚úÖ –ê–ù–¢–ò–î–ï–¢–ï–ö–¢ –ü–†–ò–ú–ï–ù–Ø–ï–ú
        Object.defineProperty(navigator, 'userAgent', {get: ()=>randomUA});
        Object.defineProperty(navigator, 'platform', {get: ()=>isIphone?'iPhone':'Linux armv8l'});
        Object.defineProperty(screen, 'width', {get: ()=>isIphone?393:412});
        Object.defineProperty(screen, 'height', {get: ()=>isIphone?852:915});
        Object.defineProperty(navigator, 'webdriver', {get: ()=>false});
        Object.defineProperty(navigator, 'languages', {get: ()=>['ru-RU','ru','en']});
        
        // Canvas/WebGL —Å–ø—É—Ñ (–∏–∑ —Ç–≤–æ–µ–≥–æ antidirect.js)
        (function(){
            const origToDataURL = HTMLCanvasElement.prototype.toDataURL;
            HTMLCanvasElement.prototype.toDataURL = function(type){
                if(type==='image/png'){
                    const ctx = this.getContext('2d');
                    const data = ctx.getImageData(0,0,this.width,this.height);
                    for(let i=0; i<data.data.length; i+=4){
                        data.data[i] += Math.floor(Math.random()*5);
                        data.data[i+1] += Math.floor(Math.random()*5);
                        data.data[i+2] += Math.floor(Math.random()*5);
                    }
                    ctx.putImageData(data,0,0);
                }
                return origToDataURL.call(this,type);
            };
            
            const getParam = WebGLRenderingContext.prototype.getParameter;
            WebGLRenderingContext.prototype.getParameter = function(p){
                if(p===37445) return isIphone ? 'Apple Inc.' : 'Samsung Electronics Co., Ltd';
                if(p===37446) return isIphone ? 'Apple GPU' : 'Adreno (TM) 750';
                return getParam.call(this,p);
            };
        })();
        
        // ‚úÖ –†–ï–î–ò–†–ï–ö–¢ –ù–ê MARKET (–ë–ï–ó IFRAME!)
        document.getElementById('status').innerHTML = `‚úÖ ${isIphone ? 'iPhone' : 'Android'} –≥–æ—Ç–æ–≤! –ü–µ—Ä–µ—Ö–æ–¥...`;
        setTimeout(() => {
            window.top.location.href = 'https://m.market.yandex.ru';  // –ü–†–Ø–ú–û–ô –ü–ï–†–ï–•–û–î!
        }, 1500);
    </script>
</body>
</html>
