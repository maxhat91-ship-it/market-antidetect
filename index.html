<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body style="margin:0;height:100vh;background:#000;color:#0f0;font-family:monospace;padding:20px;">
    <h1>üîê –ê–Ω—Ç–∏–¥–µ—Ç–µ–∫—Ç –ê–ö–¢–ò–í–ï–ù</h1>
    <p>User-Agent: <span id="ua"></span></p>
    <p>Platform: <span id="platform"></span></p>
    <p>Canvas: <span id="canvas">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...</span></p>
    <button onclick="openMarket()" style="background:#0f0;color:#000;padding:15px;font-size:18px;border:none;border-radius:10px;cursor:pointer;">üöÄ –û–¢–ö–†–´–¢–¨ MARKET</button>
    
    <script>
        Telegram.WebApp.expand();
        
        // üé≤ –ú–ï–ù–Ø–Æ–©–ò–ô–°–Ø UA (–ò–ó –¢–í–û–ï–ì–û antidirect.js)
        const UAs = [
            'Mozilla/5.0 (iPhone; CPU iPhone OS 17_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17_2 Mobile/15E148 Safari/604.1',
            'Mozilla/5.0 (Linux; Android 14; SM-S928B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Mobile Safari/537.36',
            'Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16_6 Mobile/15E148 Safari/604.1',
            'Mozilla/5.0 (Linux; Android 13; Pixel 7) AppleWebKit/537.36 Chrome/119.0.0.0 Mobile Safari/537.36'
        ];
        const randomUA = UAs[Math.floor(Math.random() * UAs.length)];
        
        // ‚úÖ –ü–†–ò–ú–ï–ù–Ø–ï–ú –ê–ù–¢–ò–î–ï–¢–ï–ö–¢
        Object.defineProperty(navigator, 'userAgent', { get: () => randomUA });
        Object.defineProperty(navigator, 'platform', { get: () => randomUA.includes('iPhone') ? 'iPhone' : 'Linux armv8l' });
        Object.defineProperty(screen, 'width', { get: () => 393 });
        Object.defineProperty(screen, 'height', { get: () => 852 });
        Object.defineProperty(navigator, 'webdriver', { get: () => false });
        
        // ‚úÖ CANVAS –°–ü–£–§ (–ò–ó –¢–í–û–ï–ì–û –ö–û–î–ê)
        const originalToDataURL = HTMLCanvasElement.prototype.toDataURL;
        HTMLCanvasElement.prototype.toDataURL = function(type) {
            if (type === 'image/png') {
                const ctx = this.getContext('2d');
                const data = ctx.getImageData(0, 0, this.width, this.height);
                for (let i = 0; i < data.data.length; i += 4) {
                    data.data[i] += Math.floor(Math.random() * 10);
                    data.data[i + 1] += Math.floor(Math.random() * 10);
                    data.data[i + 2] += Math.floor(Math.random() * 10);
                }
                ctx.putImageData(data, 0, 0);
            }
            return originalToDataURL.call(this, type);
        };
        
        // ‚úÖ –ü–û–ö–ê–ó–´–í–ê–ï–ú INFO
        document.getElementById('ua').textContent = randomUA.substring(0, 50) + '...';
        document.getElementById('platform').textContent = navigator.platform;
        
        // ‚úÖ TEST CANVAS
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        ctx.textBaseline = 'top';
        ctx.font = '14px Arial';
        ctx.fillText('Test', 2, 2);
        document.getElementById('canvas').textContent = '‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω—ã–π (' + canvas.toDataURL().slice(-20) + ')';
        
        // ‚úÖ –û–¢–ö–†–´–í–ê–ï–¢ MARKET –° –ê–ù–¢–ò–î–ï–¢–ï–ö–¢–û–ú
        function openMarket() {
            Telegram.WebApp.openLink('https://m.market.yandex.ru');
        }
    </script>
</body>
</html>
